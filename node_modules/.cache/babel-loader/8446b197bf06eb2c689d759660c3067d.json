{"remainingRequest":"D:\\0毕设相关\\EAvLMS\\node_modules\\babel-loader\\lib\\index.js!D:\\0毕设相关\\EAvLMS\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\0毕设相关\\EAvLMS\\src\\utils\\websocket.js","dependencies":[{"path":"D:\\0毕设相关\\EAvLMS\\src\\utils\\websocket.js","mtime":1590495032047},{"path":"D:\\0毕设相关\\EAvLMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\0毕设相关\\EAvLMS\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\0毕设相关\\EAvLMS\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n//用于连接websocket 浏览器方法\n//获取 Web Socket 连接后，可以通过 send() 方法来向服务器发送数据，并通过 onmessage 事件来接收服务器返回的数据\nvar _default = {\n  init: function init(fn) {\n    var user = JSON.parse(sessionStorage.getItem('user'));\n\n    if (user) {\n      //后端地址\n      var socketUrl = 'ws://localhost:8080/notice-ws/' + user.id;\n      var socket = new WebSocket(socketUrl); //打开 连接建立时触发\n\n      socket.onopen = function () {\n        console.log('WebSocket已打开');\n      }; //关闭 连接关闭时触发\n\n\n      socket.onclose = function () {\n        console.log('WebSocket已关闭');\n      }; //通信发生错误时触发\n\n\n      socket.onerror = function () {\n        console.log('WebSocket发生了错误');\n      }; //消息 客户端接收服务端数据时触发\n\n\n      socket.onmessage = function (data) {\n        data = JSON.parse(data.data); //将data字符串转换为对象\n\n        console.log('WebSocket收到服务端信息：', data);\n        fn(data);\n      };\n    }\n  }\n};\nexports.default = _default;",null]}